# 产品需求文档 (PRD)
# 内容电商定制平台 - Content Commerce Customization Platform

**文档版本**: 1.0  
**创建日期**: 2025-12-12  
**产品负责人**: Product Team  
**目标发布**: Q1 2026

---

## 1. 产品概述

### 1.1 产品愿景

打造一个让**每个人都能用内容创造商品**的电商平台，连接创作者的创意内容与标准化的商品供应链，实现"设计即商品"的商业模式。

### 1.2 核心价值主张

#### 对创作者
- **零门槛创业**: 无需库存、生产、物流，只需提供设计
- **被动收入**: 设计一次，持续获得版权收益
- **创意变现**: 将粉丝流量转化为实际收入

#### 对消费者
- **个性化表达**: 购买独一无二的定制商品
- **所见即所得**: 实时预览最终效果
- **品质保证**: 基于标准商品，质量有保障

#### 对平台
- **双边市场**: 连接创作者和消费者
- **规模效应**: 设计可复用，边际成本低
- **数据资产**: 积累用户偏好和设计数据

### 1.3 目标用户

#### 主要用户群体

**创作者 (Creator)**
- **画师/设计师**: 有原创设计能力
- **KOL/网红**: 有粉丝基础，需要周边变现
- **IP 持有者**: 有 IP 授权，需要商品化渠道

**消费者 (Consumer)**
- **个性化追求者**: 18-35岁，追求独特性
- **粉丝群体**: 愿意为喜欢的创作者/IP 付费
- **礼品购买者**: 需要定制礼品的用户

### 1.4 市场分析

#### 市场规模
- 全球定制商品市场: $500B+ (2024)
- 中国个性化定制市场: ¥2000亿+ (2024)
- 年增长率: 15-20%

#### 竞争分析

**直接竞争对手**
- Printful, Printify (国际)
- 犀牛工厂, 有赞定制 (国内)

**竞争优势**
- ✅ 更简单的定制流程
- ✅ 更丰富的设计素材库
- ✅ 更好的创作者生态
- ✅ AI 辅助设计功能

---

## 2. 功能需求

### 2.1 核心功能模块

#### 模块 1: 用户认证与权限管理

**功能描述**: 统一的用户身份认证系统，支持多角色权限管理

**用户故事**:
- 作为**新用户**，我希望能够快速注册账号，以便开始使用平台
- 作为**创作者**，我希望能够申请创作者身份，以便发布设计和获得收益
- 作为**用户**，我希望能够安全登录，保护我的个人信息和订单数据

**功能要求**:

1. **用户注册**
   - 支持邮箱注册
   - 支持第三方登录 (Google, GitHub)
   - 邮箱验证
   - 用户协议确认

2. **用户登录**
   - 邮箱密码登录
   - 第三方账号登录
   - 记住登录状态
   - 忘记密码重置

3. **角色管理**
   - 普通用户 (Consumer)
   - 创作者 (Creator)
   - 管理员 (Admin)
   - 角色切换功能

4. **权限控制**
   - 基于角色的访问控制 (RBAC)
   - 资源所有权验证
   - API 权限管理

**技术要求**:
- 使用 NextAuth.js 进行认证
- JWT token 管理
- 与 Strapi 和 Medusa 用户系统同步
- Session 管理

**验收标准**:
- [ ] 用户可以成功注册并收到验证邮件
- [ ] 用户可以使用邮箱和第三方账号登录
- [ ] 创作者可以访问创作者专属功能
- [ ] 普通用户无法访问创作者功能
- [ ] 用户只能编辑/删除自己的资源

---

#### 模块 2: 设计编辑器 (Customizer)

**功能描述**: 所见即所得的可视化设计编辑器，支持图片、文字、形状的自由组合

**用户故事**:
- 作为**消费者**，我希望能够在商品上添加自己喜欢的图案和文字，以便创建个性化商品
- 作为**消费者**，我希望能够实时预览设计效果，确保最终商品符合预期
- 作为**消费者**，我希望编辑过程简单直观，不需要专业设计技能

**功能要求**:

1. **画布管理**
   - 加载商品底图
   - 多面切换 (正面/背面)
   - 缩放和平移
   - 网格和参考线

2. **元素操作**
   - 添加图片 (上传/素材库)
   - 添加文字 (字体/大小/颜色)
   - 添加形状 (矩形/圆形/三角形)
   - 拖拽移动
   - 缩放旋转
   - 图层顺序调整

3. **编辑功能**
   - 撤销/重做 (Ctrl+Z / Ctrl+Y)
   - 复制/粘贴
   - 删除元素
   - 对齐辅助
   - 吸附功能

4. **图层管理**
   - 图层列表显示
   - 图层重命名
   - 显示/隐藏图层
   - 锁定/解锁图层
   - 拖拽调整顺序

5. **保存和导出**
   - 保存设计到云端
   - 生成预览图
   - 导出为图片
   - 添加到购物车

**技术要求**:
- 使用 Fabric.js 作为画布引擎
- 支持高清预览 (2x/3x)
- 性能优化 (60fps)
- 响应式设计

**验收标准**:
- [ ] 用户可以添加图片、文字、形状到画布
- [ ] 用户可以自由移动、缩放、旋转元素
- [ ] 撤销/重做功能正常工作
- [ ] 图层管理器可以操作所有图层
- [ ] 设计可以保存并重新加载
- [ ] 预览图清晰准确

---

#### 模块 3: 素材库与资源管理

**功能描述**: 设计素材的上传、管理和分享系统

**用户故事**:
- 作为**创作者**，我希望能够上传我的设计作品，以便在平台上销售
- 作为**消费者**，我希望能够浏览丰富的设计素材，找到喜欢的图案
- 作为**用户**，我希望能够管理我上传的图片和保存的设计

**功能要求**:

1. **素材上传**
   - 支持 PNG, JPG, SVG 格式
   - 图片压缩和优化
   - 批量上传
   - 上传进度显示

2. **素材管理**
   - 我的素材列表
   - 素材分类和标签
   - 搜索和筛选
   - 编辑素材信息
   - 删除素材

3. **素材市场**
   - 浏览所有公开素材
   - 按分类浏览
   - 搜索功能
   - 热门/最新排序
   - 素材详情页

4. **版权管理**
   - 设置素材为公开/私有
   - 版权声明
   - 使用许可设置
   - 侵权举报

**技术要求**:
- 集成 Strapi Upload API
- 图片 CDN 加速
- 图片格式转换 (WebP)
- 缩略图生成

**验收标准**:
- [ ] 用户可以上传图片并自动压缩
- [ ] 用户可以管理自己的素材
- [ ] 用户可以浏览公开素材库
- [ ] 搜索功能准确快速
- [ ] 素材加载速度快 (< 2s)

---

#### 模块 4: 产品模板系统

**功能描述**: 创作者创建和发布产品模板，消费者基于模板定制

**用户故事**:
- 作为**创作者**，我希望能够创建产品模板，预设好设计位置和效果
- 作为**创作者**，我希望能够发布模板到市场，让更多人使用我的设计
- 作为**消费者**，我希望能够基于模板快速定制，节省设计时间

**功能要求**:

1. **模板创建向导**
   - 步骤 1: 选择基础商品
   - 步骤 2: 上传/选择设计
   - 步骤 3: 调整设计位置
   - 步骤 4: 设置模板信息
   - 步骤 5: 预览并发布

2. **模板配置**
   - 设计位置和大小
   - 默认颜色方案
   - 可定制区域设置
   - 价格设置

3. **模板管理**
   - 我的模板列表
   - 编辑模板
   - 上架/下架
   - 销售数据统计

4. **模板市场**
   - 浏览所有模板
   - 按类别筛选
   - 搜索功能
   - 模板详情页
   - 使用模板定制

**技术要求**:
- 模板数据结构设计
- 预览图自动生成
- 模板版本控制

**验收标准**:
- [ ] 创作者可以完整创建模板
- [ ] 模板正确保存到数据库
- [ ] 预览图自动生成
- [ ] 消费者可以基于模板定制
- [ ] 模板市场功能完整

---

#### 模块 5: 购物车与结账

**功能描述**: 定制商品的购物车管理和结账流程

**用户故事**:
- 作为**消费者**，我希望能够将定制商品添加到购物车，以便一次性购买多个商品
- 作为**消费者**，我希望能够在购物车中查看定制预览，确认无误后再结账
- 作为**消费者**，我希望结账流程简单快捷，支持多种支付方式

**功能要求**:

1. **购物车管理**
   - 添加定制商品
   - 显示定制预览图
   - 修改数量
   - 删除商品
   - 保存购物车状态

2. **定制商品展示**
   - 显示"定制商品"标签
   - 显示设计预览图
   - 显示商品规格 (颜色/尺码)
   - 显示价格明细

3. **结账流程**
   - 填写收货地址
   - 选择配送方式
   - 选择支付方式
   - 订单确认
   - 支付

4. **订单管理**
   - 订单列表
   - 订单详情
   - 订单状态跟踪
   - 订单取消/退款

**技术要求**:
- 使用 Medusa LineItem metadata 存储定制数据
- 购物车状态持久化
- 支付网关集成

**验收标准**:
- [ ] 定制商品可以添加到购物车
- [ ] 购物车正确显示定制预览
- [ ] 结账流程流畅
- [ ] 订单包含完整的定制信息
- [ ] 支付成功后订单创建

---

#### 模块 6: 创作者工作台

**功能描述**: 创作者管理设计、查看销售数据、获取收益的后台系统

**用户故事**:
- 作为**创作者**，我希望能够查看我的设计销售情况，了解哪些设计最受欢迎
- 作为**创作者**，我希望能够查看我的收益，并能够提现
- 作为**创作者**，我希望能够管理我的所有设计和模板

**功能要求**:

1. **仪表板**
   - 销售概览 (今日/本周/本月)
   - 收益统计
   - 热门设计排行
   - 最近订单

2. **设计管理**
   - 我的设计列表
   - 设计详情和统计
   - 编辑/删除设计
   - 设计分类管理

3. **模板管理**
   - 我的模板列表
   - 模板销售数据
   - 编辑/上下架模板
   - 模板定价设置

4. **收益中心**
   - 收益明细
   - 提现申请
   - 提现记录
   - 收益报表

5. **设置**
   - 个人信息
   - 收款信息
   - 通知设置
   - 隐私设置

**技术要求**:
- 数据统计和可视化
- 报表生成
- 权限控制

**验收标准**:
- [ ] 创作者可以查看销售数据
- [ ] 收益计算准确
- [ ] 可以申请提现
- [ ] 可以管理所有设计和模板
- [ ] 数据实时更新

---

### 2.2 功能优先级

#### P0 (必须有 - MVP)
- ✅ 用户认证与登录
- ✅ 设计编辑器核心功能
- ✅ 购物车与结账
- ✅ 订单管理

#### P1 (应该有 - Beta)
- ⏳ 素材库与上传
- ⏳ 产品模板系统
- ⏳ 创作者工作台
- ⏳ 多面定制支持

#### P2 (可以有 - V1.0)
- ⏳ AI 辅助设计
- ⏳ 社区功能
- ⏳ 高级编辑功能
- ⏳ 移动端适配

---

## 3. 非功能需求

### 3.1 性能要求

**响应时间**
- 页面加载: < 3s (首次), < 1s (后续)
- API 响应: < 500ms (p95)
- 编辑器操作: 60fps
- 图片加载: < 2s

**并发能力**
- 支持 1000+ 并发用户
- 支持 100+ 并发编辑会话

**可扩展性**
- 水平扩展支持
- 数据库分片支持
- CDN 加速

### 3.2 安全要求

**认证与授权**
- JWT token 认证
- HTTPS 加密传输
- CSRF 防护
- XSS 防护

**数据安全**
- 用户密码加密存储
- 敏感数据加密
- 定期备份
- 访问日志记录

**支付安全**
- PCI DSS 合规
- 支付网关加密
- 交易记录审计

### 3.3 可用性要求

**系统可用性**
- 可用性: 99.9% (SLA)
- 故障恢复时间: < 1h
- 数据备份: 每日

**监控和告警**
- 实时性能监控
- 错误日志收集
- 异常告警通知

### 3.4 兼容性要求

**浏览器支持**
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

**设备支持**
- 桌面端 (优先)
- 平板端 (兼容)
- 移动端 (基础)

---

## 4. 技术架构

### 4.1 技术栈

**前端**
- Framework: Next.js 16
- Language: TypeScript
- Styling: Tailwind CSS
- State: Zustand
- Canvas: Fabric.js
- UI: Radix UI + Lucide Icons

**后端**
- CMS: Strapi
- E-commerce: Medusa.js
- Database: PostgreSQL
- Cache: Redis
- Storage: S3/OSS

**基础设施**
- Hosting: Vercel (Frontend)
- API: Railway/AWS (Backend)
- CDN: Cloudflare
- Monitoring: Sentry

### 4.2 数据模型

**核心实体**

```typescript
// User (Strapi + Medusa)
interface User {
  id: string;
  email: string;
  username: string;
  role: 'consumer' | 'creator' | 'admin';
  profile: UserProfile;
}

// DesignAsset (Strapi)
interface DesignAsset {
  id: string;
  name: string;
  media: Media;
  tags: string[];
  creator: User;
  isPublic: boolean;
}

// ProductTemplate (Strapi)
interface ProductTemplate {
  id: string;
  name: string;
  medusaProductId: string;
  designAsset: DesignAsset;
  defaultConfig: TemplateConfig;
  creator: User;
  isPublic: boolean;
  price: number;
}

// Design (Strapi)
interface Design {
  id: string;
  name: string;
  imageUrl: string;
  canvasData: object;
  user: User;
  productTemplate?: ProductTemplate;
  medusaVariantId?: string;
}

// LineItem (Medusa with metadata)
interface CustomLineItem extends LineItem {
  metadata: {
    isCustomProduct: boolean;
    designId: string;
    designPreview: string;
    canvasData?: string;
  };
}
```

### 4.3 系统架构图

```
┌─────────────┐
│   用户端    │
│  (Browser)  │
└──────┬──────┘
       │
       ├─────────────┐
       │             │
┌──────▼──────┐ ┌───▼────────┐
│  Next.js    │ │  Strapi    │
│  Frontend   │ │    CMS     │
└──────┬──────┘ └───┬────────┘
       │             │
       └─────┬───────┘
             │
      ┌──────▼──────┐
      │  Medusa.js  │
      │  E-commerce │
      └──────┬──────┘
             │
      ┌──────▼──────┐
      │ PostgreSQL  │
      │  Database   │
      └─────────────┘
```

---

## 5. 实施计划

### 5.1 开发阶段

**Phase 1: MVP (6周)**
- Week 1-2: 认证系统 + 基础架构
- Week 3-4: 编辑器核心功能
- Week 5: 购物车与结账
- Week 6: 测试与修复

**Phase 2: Beta (4周)**
- Week 7-8: 素材库 + 模板系统
- Week 9: 创作者工作台
- Week 10: 测试与优化

**Phase 3: V1.0 (2周)**
- Week 11: 性能优化
- Week 12: 上线准备

### 5.2 里程碑

- **M1 (3周后)**: 编辑器可用
- **M2 (6周后)**: MVP 完成
- **M3 (10周后)**: Beta 版本
- **M4 (12周后)**: 正式上线

---

## 6. 成功指标

### 6.1 业务指标

**用户增长**
- 注册用户: 10,000+ (3个月)
- 活跃用户: 1,000+ (DAU)
- 创作者: 500+ (3个月)

**交易指标**
- GMV: ¥100,000+ (3个月)
- 订单量: 1,000+ (3个月)
- 客单价: ¥100+

**留存指标**
- 次日留存: 40%+
- 7日留存: 20%+
- 30日留存: 10%+

### 6.2 产品指标

**使用指标**
- 设计创建: 5,000+ (3个月)
- 模板发布: 500+ (3个月)
- 平均编辑时长: 10-15分钟

**质量指标**
- 页面加载: < 3s
- 编辑器帧率: 60fps
- 系统可用性: 99.9%
- 错误率: < 0.1%

---

## 7. 风险与挑战

### 7.1 技术风险

**性能风险**
- 大型画布性能问题
- 缓解: 画布优化、懒加载

**集成风险**
- Strapi/Medusa 集成复杂
- 缓解: 充分测试、文档完善

### 7.2 业务风险

**供应链风险**
- 生产质量不稳定
- 缓解: 多供应商、质检流程

**版权风险**
- 侵权内容上传
- 缓解: 内容审核、举报机制

---

## 8. 附录

### 8.1 术语表

- **Creator**: 创作者，上传设计的用户
- **Consumer**: 消费者，购买定制商品的用户
- **Customizer**: 定制器，可视化设计编辑器
- **Template**: 模板，创作者预设的产品设计
- **Design Asset**: 设计素材，可复用的图案/图片

### 8.2 参考文档

- [产品设计方案](../C:/Users/fu-hu/.gemini/antigravity/brain/c435aa1b-afa0-4614-93cc-ea14a582c17e/product_design.md)
- [实施审查报告](../IMPLEMENTATION_AUDIT.md)
- [技术架构文档](./ARCHITECTURE.md)

---

**文档状态**: ✅ 已完成  
**下一步**: 创建 Epic 和 User Stories
