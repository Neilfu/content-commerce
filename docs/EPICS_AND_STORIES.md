# Epic 和 User Stories
# 内容电商定制平台

**基于**: [PRD v1.0](./PRD.md)  
**创建日期**: 2025-12-12  
**目标发布**: Q1 2026

---

## Epic 概览

| Epic ID | Epic 名称 | 优先级 | 状态 | 预估工时 |
|---------|----------|--------|------|---------|
| EPIC-001 | 用户认证与权限管理 | P0 | 🔴 进行中 | 5天 |
| EPIC-002 | 设计编辑器核心功能 | P0 | 🔴 进行中 | 10天 |
| EPIC-003 | 素材库与资源管理 | P1 | ⏳ 待开始 | 5天 |
| EPIC-004 | 产品模板系统 | P1 | ⏳ 待开始 | 5天 |
| EPIC-005 | 购物车与结账 | P0 | 🟡 部分完成 | 3天 |
| EPIC-006 | 创作者工作台 | P1 | ⏳ 待开始 | 5天 |

**总计**: 33天 (约 6.5 周)

---

## EPIC-001: 用户认证与权限管理

**目标**: 建立安全可靠的用户认证系统，支持多角色权限管理

**业务价值**: 
- 保护用户数据安全
- 支持创作者和消费者不同的功能访问
- 为后续功能提供用户身份基础

**技术方案**:
- NextAuth.js 认证框架
- JWT token 管理
- Strapi + Medusa 用户同步

**验收标准**:
- [ ] 用户可以注册并验证邮箱
- [ ] 用户可以登录并保持会话
- [ ] 创作者可以访问专属功能
- [ ] 权限控制正确工作

### User Stories

#### STORY-001-01: 用户注册
**作为** 新用户  
**我希望** 能够快速注册账号  
**以便** 开始使用平台功能

**验收标准**:
- [ ] 用户可以使用邮箱注册
- [ ] 密码强度验证（至少8位，包含字母和数字）
- [ ] 发送验证邮件
- [ ] 用户协议确认
- [ ] 注册成功后自动登录

**技术任务**:
- [ ] 创建注册页面 UI
- [ ] 集成 NextAuth.js 邮箱注册
- [ ] 实现邮箱验证逻辑
- [ ] 创建 Strapi 用户记录
- [ ] 创建 Medusa 客户记录

**预估**: 1天

---

#### STORY-001-02: 用户登录
**作为** 已注册用户  
**我希望** 能够安全登录  
**以便** 访问我的账号和数据

**验收标准**:
- [ ] 用户可以使用邮箱密码登录
- [ ] 支持"记住我"功能
- [ ] 登录失败提示清晰
- [ ] 支持忘记密码重置
- [ ] Session 正确管理

**技术任务**:
- [ ] 创建登录页面 UI
- [ ] 集成 NextAuth.js 登录
- [ ] 实现 Session 管理
- [ ] 实现密码重置流程
- [ ] 添加登录错误处理

**预估**: 1天

---

#### STORY-001-03: 第三方登录
**作为** 用户  
**我希望** 能够使用第三方账号登录  
**以便** 更快速地访问平台

**验收标准**:
- [ ] 支持 Google 登录
- [ ] 支持 GitHub 登录
- [ ] 第三方账号与平台账号关联
- [ ] 首次登录自动创建账号

**技术任务**:
- [ ] 配置 Google OAuth
- [ ] 配置 GitHub OAuth
- [ ] 实现账号关联逻辑
- [ ] 处理首次登录流程

**预估**: 1天

---

#### STORY-001-04: 角色管理
**作为** 用户  
**我希望** 能够申请成为创作者  
**以便** 发布设计和获得收益

**验收标准**:
- [ ] 用户可以申请创作者身份
- [ ] 创作者申请需要审核
- [ ] 创作者可以访问创作者功能
- [ ] 普通用户无法访问创作者功能

**技术任务**:
- [ ] 创建创作者申请表单
- [ ] 实现角色切换逻辑
- [ ] 更新 Strapi 用户角色
- [ ] 实现权限检查中间件

**预估**: 1天

---

#### STORY-001-05: 权限控制
**作为** 系统  
**我需要** 确保用户只能访问授权的资源  
**以便** 保护数据安全

**验收标准**:
- [ ] 基于角色的访问控制 (RBAC)
- [ ] 资源所有权验证
- [ ] API 权限检查
- [ ] 未授权访问返回 403

**技术任务**:
- [ ] 实现 RBAC 中间件
- [ ] 实现资源所有权检查
- [ ] 更新所有 API 路由添加权限检查
- [ ] 添加权限测试

**预估**: 1天

---

## EPIC-002: 设计编辑器核心功能

**目标**: 打造所见即所得的可视化设计编辑器

**业务价值**:
- 核心产品体验
- 降低用户设计门槛
- 提高定制转化率

**技术方案**:
- Fabric.js 画布引擎
- 撤销/重做历史管理
- 图层管理系统

**验收标准**:
- [ ] 用户可以添加和编辑元素
- [ ] 撤销/重做功能正常
- [ ] 图层管理完整
- [ ] 性能达到 60fps

### User Stories

#### STORY-002-01: 画布初始化
**作为** 用户  
**我希望** 打开编辑器时看到商品底图  
**以便** 开始设计

**验收标准**:
- [ ] 加载商品底图
- [ ] 画布尺寸正确
- [ ] 支持缩放和平移
- [ ] 显示网格辅助线

**技术任务**:
- [ ] 初始化 Fabric.js 画布
- [ ] 加载商品图片
- [ ] 实现缩放和平移
- [ ] 添加网格功能

**预估**: 1天

---

#### STORY-002-02: 添加图片
**作为** 用户  
**我希望** 能够添加图片到画布  
**以便** 创建个性化设计

**验收标准**:
- [ ] 支持上传本地图片
- [ ] 支持从素材库选择
- [ ] 图片自动适配画布
- [ ] 支持拖拽移动

**技术任务**:
- [ ] 实现图片上传功能
- [ ] 集成素材库选择
- [ ] 添加图片到画布
- [ ] 实现拖拽功能

**预估**: 1天

---

#### STORY-002-03: 添加文字
**作为** 用户  
**我希望** 能够添加文字到画布  
**以便** 添加个性化文案

**验收标准**:
- [ ] 支持添加文字
- [ ] 支持字体选择
- [ ] 支持字号和颜色调整
- [ ] 支持文字编辑

**技术任务**:
- [ ] 实现文字添加功能
- [ ] 集成字体库
- [ ] 实现文字属性编辑
- [ ] 添加文字编辑模式

**预估**: 1天

---

#### STORY-002-04: 元素操作
**作为** 用户  
**我希望** 能够自由操作画布元素  
**以便** 调整设计效果

**验收标准**:
- [ ] 支持选中元素
- [ ] 支持拖拽移动
- [ ] 支持缩放旋转
- [ ] 支持删除元素

**技术任务**:
- [ ] 实现元素选择
- [ ] 实现变换控制
- [ ] 添加删除功能
- [ ] 优化操作性能

**预估**: 1天

---

#### STORY-002-05: 撤销重做
**作为** 用户  
**我希望** 能够撤销和重做操作  
**以便** 修正错误

**验收标准**:
- [ ] 支持 Ctrl+Z 撤销
- [ ] 支持 Ctrl+Y 重做
- [ ] 历史记录最多 50 条
- [ ] UI 按钮可用

**技术任务**:
- [ ] 集成 HistoryManager
- [ ] 监听画布事件
- [ ] 添加快捷键
- [ ] 创建 UI 按钮

**预估**: 1天

---

#### STORY-002-06: 图层管理
**作为** 用户  
**我希望** 能够管理图层  
**以便** 控制元素层级

**验收标准**:
- [ ] 显示图层列表
- [ ] 支持拖拽调整顺序
- [ ] 支持显示/隐藏
- [ ] 支持锁定/解锁

**技术任务**:
- [ ] 集成 LayerManager 组件
- [ ] 同步画布和图层
- [ ] 实现图层操作
- [ ] 优化 UI 交互

**预估**: 1天

---

#### STORY-002-07: 保存设计
**作为** 用户  
**我希望** 能够保存我的设计  
**以便** 稍后继续编辑

**验收标准**:
- [ ] 保存画布数据到 Strapi
- [ ] 生成预览图
- [ ] 支持重新加载
- [ ] 自动保存草稿

**技术任务**:
- [ ] 实现保存逻辑
- [ ] 生成预览图
- [ ] 实现加载逻辑
- [ ] 添加自动保存

**预估**: 1天

---

#### STORY-002-08: 添加到购物车
**作为** 用户  
**我希望** 能够将设计添加到购物车  
**以便** 购买定制商品

**验收标准**:
- [ ] 保存设计到 Strapi
- [ ] 调用 cartService.addCustomProduct
- [ ] 跳转到购物车页面
- [ ] 显示成功提示

**技术任务**:
- [ ] 集成 cartIntegration 辅助函数
- [ ] 实现添加到购物车逻辑
- [ ] 添加错误处理
- [ ] 优化用户反馈

**预估**: 1天

---

## EPIC-003: 素材库与资源管理

**目标**: 建立丰富的设计素材库和管理系统

**业务价值**:
- 降低用户设计门槛
- 增加平台内容价值
- 促进创作者生态

**技术方案**:
- Strapi Upload API
- 图片 CDN 加速
- WebP 格式优化

**验收标准**:
- [ ] 用户可以上传素材
- [ ] 素材库可浏览搜索
- [ ] 加载速度快
- [ ] 版权管理完善

### User Stories

#### STORY-003-01: 素材上传
**作为** 创作者  
**我希望** 能够上传我的设计作品  
**以便** 在平台上销售

**验收标准**:
- [ ] 支持 PNG, JPG, SVG
- [ ] 自动压缩优化
- [ ] 批量上传
- [ ] 显示上传进度

**技术任务**:
- [ ] 集成 uploadService
- [ ] 实现图片压缩
- [ ] 创建上传 UI
- [ ] 添加进度显示

**预估**: 1天

---

#### STORY-003-02: 素材管理
**作为** 创作者  
**我希望** 能够管理我的素材  
**以便** 组织和维护作品

**验收标准**:
- [ ] 显示我的素材列表
- [ ] 支持分类和标签
- [ ] 支持搜索筛选
- [ ] 支持编辑和删除

**技术任务**:
- [ ] 创建素材列表页面
- [ ] 实现分类标签系统
- [ ] 实现搜索功能
- [ ] 添加编辑删除功能

**预估**: 2天

---

#### STORY-003-03: 素材市场
**作为** 用户  
**我希望** 能够浏览公开素材  
**以便** 找到喜欢的设计

**验收标准**:
- [ ] 显示所有公开素材
- [ ] 按分类浏览
- [ ] 搜索功能
- [ ] 热门/最新排序

**技术任务**:
- [ ] 创建素材市场页面
- [ ] 实现分类筛选
- [ ] 实现搜索功能
- [ ] 添加排序功能

**预估**: 2天

---

## EPIC-004: 产品模板系统

**目标**: 让创作者创建模板，消费者快速定制

**业务价值**:
- 提高创作者收益
- 降低消费者定制门槛
- 增加平台 GMV

**技术方案**:
- 模板数据结构
- 预览图自动生成
- 模板市场

**验收标准**:
- [ ] 创作者可以创建模板
- [ ] 模板可以发布到市场
- [ ] 消费者可以使用模板
- [ ] 预览图自动生成

### User Stories

#### STORY-004-01: 模板创建向导
**作为** 创作者  
**我希望** 能够创建产品模板  
**以便** 让更多人使用我的设计

**验收标准**:
- [ ] 5步向导流程
- [ ] 选择基础商品
- [ ] 上传/选择设计
- [ ] 调整位置大小
- [ ] 设置模板信息

**技术任务**:
- [ ] 完善模板创建向导页面
- [ ] 实现商品选择器
- [ ] 实现设计上传器
- [ ] 实现位置调整器
- [ ] 实现模板保存逻辑

**预估**: 3天

---

#### STORY-004-02: 模板市场
**作为** 消费者  
**我希望** 能够浏览模板市场  
**以便** 快速找到喜欢的设计

**验收标准**:
- [ ] 显示所有公开模板
- [ ] 按类别筛选
- [ ] 搜索功能
- [ ] 模板详情页

**技术任务**:
- [ ] 创建模板市场页面
- [ ] 实现筛选搜索
- [ ] 创建模板详情页
- [ ] 添加使用模板功能

**预估**: 2天

---

## EPIC-005: 购物车与结账

**目标**: 完善定制商品的购买流程

**业务价值**:
- 提高转化率
- 完整的交易闭环
- 支持批量购买

**技术方案**:
- Medusa LineItem metadata
- 购物车状态持久化
- 支付网关集成

**验收标准**:
- [ ] 定制商品可添加到购物车
- [ ] 购物车正确显示
- [ ] 结账流程完整
- [ ] 订单创建成功

### User Stories

#### STORY-005-01: 购物车显示优化
**作为** 用户  
**我希望** 在购物车中看到定制预览  
**以便** 确认商品无误

**验收标准**:
- [ ] 显示"定制商品"标签
- [ ] 显示设计预览图
- [ ] 显示商品规格
- [ ] 显示价格明细

**技术任务**:
- [ ] 更新购物车页面 UI
- [ ] 检测定制商品
- [ ] 显示预览图
- [ ] 优化样式

**预估**: 1天

---

#### STORY-005-02: 结账流程
**作为** 用户  
**我希望** 能够顺利结账  
**以便** 完成购买

**验收标准**:
- [ ] 填写收货地址
- [ ] 选择配送方式
- [ ] 选择支付方式
- [ ] 订单确认

**技术任务**:
- [ ] 完善结账页面
- [ ] 集成地址管理
- [ ] 集成支付网关
- [ ] 实现订单创建

**预估**: 2天

---

## EPIC-006: 创作者工作台

**目标**: 为创作者提供完整的管理后台

**业务价值**:
- 提高创作者满意度
- 促进内容创作
- 增加平台粘性

**技术方案**:
- 数据统计和可视化
- 报表生成
- 权限控制

**验收标准**:
- [ ] 创作者可以查看销售数据
- [ ] 可以管理设计和模板
- [ ] 可以查看和提现收益
- [ ] 数据实时更新

### User Stories

#### STORY-006-01: 仪表板
**作为** 创作者  
**我希望** 能够查看销售概览  
**以便** 了解业务情况

**验收标准**:
- [ ] 显示销售概览
- [ ] 显示收益统计
- [ ] 显示热门设计
- [ ] 显示最近订单

**技术任务**:
- [ ] 创建仪表板页面
- [ ] 实现数据统计
- [ ] 添加图表可视化
- [ ] 优化性能

**预估**: 2天

---

#### STORY-006-02: 收益中心
**作为** 创作者  
**我希望** 能够查看和提现收益  
**以便** 获得报酬

**验收标准**:
- [ ] 显示收益明细
- [ ] 支持提现申请
- [ ] 显示提现记录
- [ ] 生成收益报表

**技术任务**:
- [ ] 创建收益中心页面
- [ ] 实现收益计算
- [ ] 实现提现功能
- [ ] 生成报表

**预估**: 3天

---

## 实施优先级

### Sprint 1 (Week 1-2): 认证基础
- STORY-001-01: 用户注册
- STORY-001-02: 用户登录
- STORY-001-03: 第三方登录
- STORY-001-04: 角色管理
- STORY-001-05: 权限控制

### Sprint 2 (Week 3-4): 编辑器核心
- STORY-002-01: 画布初始化
- STORY-002-02: 添加图片
- STORY-002-03: 添加文字
- STORY-002-04: 元素操作
- STORY-002-05: 撤销重做
- STORY-002-06: 图层管理
- STORY-002-07: 保存设计
- STORY-002-08: 添加到购物车

### Sprint 3 (Week 5): 购物车完善
- STORY-005-01: 购物车显示优化
- STORY-005-02: 结账流程

### Sprint 4 (Week 7-8): 素材和模板
- STORY-003-01: 素材上传
- STORY-003-02: 素材管理
- STORY-003-03: 素材市场
- STORY-004-01: 模板创建向导
- STORY-004-02: 模板市场

### Sprint 5 (Week 9): 创作者工作台
- STORY-006-01: 仪表板
- STORY-006-02: 收益中心

---

**文档状态**: ✅ 已完成  
**总 Stories**: 20个  
**总预估工时**: 33天  
**下一步**: Sprint Planning
